{"programModules":{"EXT005MI":{"program":"EXT005MI","triggers":{},"transactions":{"AddEXTRAW":{"sourceUuid":"4161b96c-37dd-44f9-9df8-1e9104471e09","name":"AddEXTRAW","program":"EXT005MI","description":"Add record on table EXTRAW","active":true,"multi":false,"modified":1746026750729,"modifiedBy":"APAULDY","outputFields":[],"inputFields":[{"name":"CONO","description":"Company","length":3,"mandatory":false,"type":"N","refField":null},{"name":"FACI","description":"Facility","length":3,"mandatory":true,"type":"A","refField":null},{"name":"MTNO","description":"Raw material item number","length":15,"mandatory":true,"type":"A","refField":null},{"name":"ITNO","description":"Previous level item","length":15,"mandatory":true,"type":"A","refField":null},{"name":"ITCL","description":"Product group","length":5,"mandatory":true,"type":"A","refField":null},{"name":"FDAT","description":"From date","length":8,"mandatory":true,"type":"N","refField":null},{"name":"TDAT","description":"To date","length":8,"mandatory":true,"type":"N","refField":null},{"name":"TRQT","description":"Transaction quantity - basic U/M","length":15,"mandatory":false,"type":"N","refField":null},{"name":"TAMT","description":"Amount","length":17,"mandatory":false,"type":"N","refField":null},{"name":"PCTG","description":"Percentage","length":5,"mandatory":false,"type":"N","refField":null}],"utilities":["DateUtil"],"market":"ALL"}},"batches":{},"advancedPrograms":{}}},"utilities":{},"sources":{"4161b96c-37dd-44f9-9df8-1e9104471e09":{"uuid":"4161b96c-37dd-44f9-9df8-1e9104471e09","updated":1749030713848,"updatedBy":"APAULDY","created":1742829147162,"createdBy":"APAULDY","apiVersion":"0.15","beVersion":"16.0.0.20250318170439.10","language":"GROOVY","codeHash":"91F0C68D071309296950B9D597EC2D4C96D2FE0CD19493E4FC4C10A3DCCE6EDA","code":"LyoqDQogKiBATmFtZTogRVhUMDA1TUkuQWRkRVhUUkFXDQogKiBARGVzY3JpcHRpb246IEFkZCByZWNvcmQgb24gdGFibGUgRVhUUkFXDQogKiBAQXV0aG9yczogQWppYW4gRHkNCiAqDQogKiBAQ0hBTkdFTE9HUw0KICogIFZlcnNpb24gICBEYXRlICAgICAgVXNlciAgICBEZXNjcmlwdGlvbg0KICogIDEuMC4wICAgICAyMDI1MDMyNCAgQURZICAgICBJbml0aWFsIFJlbGVhc2UNCiAqDQogKi8NCg0KaW1wb3J0IGphdmEudGltZS5Mb2NhbERhdGVUaW1lOw0KaW1wb3J0IGphdmEudGltZS5mb3JtYXQuRGF0ZVRpbWVGb3JtYXR0ZXI7DQppbXBvcnQgamF2YS50ZXh0LlNpbXBsZURhdGVGb3JtYXQ7DQoNCnB1YmxpYyBjbGFzcyBBZGRFWFRSQVcgZXh0ZW5kcyBFeHRlbmRNM1RyYW5zYWN0aW9uIHsNCiAgcHJpdmF0ZSBmaW5hbCBNSUFQSSBtaTsNCiAgcHJpdmF0ZSBmaW5hbCBVdGlsaXR5QVBJIHV0aWxpdHk7DQogIHByaXZhdGUgZmluYWwgTG9nZ2VyQVBJIGxvZ2dlcjsNCiAgcHJpdmF0ZSBmaW5hbCBQcm9ncmFtQVBJIHByb2dyYW07DQogIHByaXZhdGUgZmluYWwgTUlDYWxsZXJBUEkgbWlDYWxsZXI7DQogIHByaXZhdGUgZmluYWwgRGF0YWJhc2VBUEkgZGF0YWJhc2U7DQoNCiAgcHJpdmF0ZSBpbnQgaW5DT05PLCBpbkZEQVQsIGluVERBVCwgaW5DSE5PLCBpblJHRFQsIGluUkdUTSwgaW5MTURULCBpbkxNVE07DQogIHByaXZhdGUgU3RyaW5nIGluRkFDSSwgaW5NVE5PLCBpbklUTk8sIGluSVRDTCwgaW5DSElEOw0KICBwcml2YXRlIGRvdWJsZSBpblRSUVQsIGluVEFNVCwgaW5QQ1RHOw0KDQogIHB1YmxpYyBBZGRFWFRSQVcoTUlBUEkgbWksIFV0aWxpdHlBUEkgdXRpbGl0eSwgTG9nZ2VyQVBJIGxvZ2dlciwgUHJvZ3JhbUFQSSBwcm9ncmFtLCBNSUNhbGxlckFQSSBtaUNhbGxlciwgRGF0YWJhc2VBUEkgZGF0YWJhc2UpIHsNCiAgICB0aGlzLm1pID0gbWk7DQogICAgdGhpcy51dGlsaXR5ID0gdXRpbGl0eTsNCiAgICB0aGlzLmxvZ2dlciA9IGxvZ2dlcjsNCiAgICB0aGlzLnByb2dyYW0gPSBwcm9ncmFtOw0KICAgIHRoaXMubWlDYWxsZXIgPSBtaUNhbGxlcjsNCiAgICB0aGlzLmRhdGFiYXNlID0gZGF0YWJhc2U7DQogIH0NCg0KICBwdWJsaWMgdm9pZCBtYWluKCkgew0KICAgIGluQ09OTyA9IG1pLmluLmdldCgiQ09OTyIpID09IG51bGwgPyBwcm9ncmFtLkxEQVpELkNPTk8gYXMgaW50IDogbWkuaW4uZ2V0KCJDT05PIikgYXMgaW50Ow0KICAgIGluRkFDSSA9IG1pLmluRGF0YS5nZXQoIkZBQ0kiKSA9PSBudWxsID8gIiIgOiBtaS5pbkRhdGEuZ2V0KCJGQUNJIikudHJpbSgpIGFzIFN0cmluZzsNCiAgICBpbk1UTk8gPSBtaS5pbkRhdGEuZ2V0KCJNVE5PIikgPT0gbnVsbCA/ICIiIDogbWkuaW5EYXRhLmdldCgiTVROTyIpLnRyaW0oKSBhcyBTdHJpbmc7DQogICAgaW5JVE5PID0gbWkuaW5EYXRhLmdldCgiSVROTyIpID09IG51bGwgPyAiIiA6IG1pLmluRGF0YS5nZXQoIklUTk8iKS50cmltKCkgYXMgU3RyaW5nOw0KICAgIGluSVRDTCA9IG1pLmluRGF0YS5nZXQoIklUQ0wiKSA9PSBudWxsID8gIiIgOiBtaS5pbkRhdGEuZ2V0KCJJVENMIikudHJpbSgpIGFzIFN0cmluZzsNCiAgICBpbkZEQVQgPSBtaS5pbkRhdGEuZ2V0KCJGREFUIikgPT0gbnVsbCA/IDAgOiBtaS5pbkRhdGEuZ2V0KCJGREFUIikudHJpbSgpIGFzIGludDsNCiAgICBpblREQVQgPSBtaS5pbkRhdGEuZ2V0KCJUREFUIikgPT0gbnVsbCA/IDAgOiBtaS5pbkRhdGEuZ2V0KCJUREFUIikudHJpbSgpIGFzIGludDsNCiAgICBpblRSUVQgPSBtaS5pbkRhdGEuZ2V0KCJUUlFUIikgPT0gbnVsbCA/IDAgOiBtaS5pbkRhdGEuZ2V0KCJUUlFUIikudHJpbSgpIGFzIGRvdWJsZTsNCiAgICBpblRBTVQgPSBtaS5pbkRhdGEuZ2V0KCJUQU1UIikgPT0gbnVsbCA/IDAgOiBtaS5pbkRhdGEuZ2V0KCJUQU1UIikudHJpbSgpIGFzIGRvdWJsZTsNCiAgICBpblBDVEcgPSBtaS5pbkRhdGEuZ2V0KCJQQ1RHIikgPT0gbnVsbCA/IDAgOiBtaS5pbkRhdGEuZ2V0KCJQQ1RHIikudHJpbSgpIGFzIGRvdWJsZTsNCg0KICAgIGlmICghaXNWYWxpZElucHV0KCkpIHsNCiAgICAgIHJldHVybjsNCiAgICB9DQogICAgDQogICAgREJBY3Rpb24gRVhUUkFXX3F1ZXJ5ID0gZGF0YWJhc2UudGFibGUoIkVYVFJBVyIpLmluZGV4KCIwMCIpLmJ1aWxkKCk7DQogICAgREJDb250YWluZXIgRVhUUkFXID0gRVhUUkFXX3F1ZXJ5LmdldENvbnRhaW5lcigpOw0KICAgIEVYVFJBVy5zZXQoIkVYQ09OTyIsIGluQ09OTyk7DQogICAgRVhUUkFXLnNldCgiRVhGQUNJIiwgaW5GQUNJKTsNCiAgICBFWFRSQVcuc2V0KCJFWE1UTk8iLCBpbk1UTk8pOw0KICAgIEVYVFJBVy5zZXQoIkVYSVROTyIsIGluSVROTyk7DQogICAgRVhUUkFXLnNldCgiRVhJVENMIiwgaW5JVENMKTsNCiAgICBFWFRSQVcuc2V0KCJFWEZEQVQiLCBpbkZEQVQpOw0KICAgIEVYVFJBVy5zZXQoIkVYVERBVCIsIGluVERBVCk7DQoNCiAgICBpZiAoRVhUUkFXX3F1ZXJ5LnJlYWQoRVhUUkFXKSkgew0KICAgICAgbWkuZXJyb3IoIlJlY29yZCBhbHJlYWR5IGV4aXN0cyIpOw0KICAgICAgcmV0dXJuOw0KICAgIH0NCg0KICAgIExvY2FsRGF0ZVRpbWUgZGF0ZVRpbWUgPSBMb2NhbERhdGVUaW1lLm5vdygpOw0KICAgIGludCBlbnRyeURhdGUgPSBkYXRlVGltZS5mb3JtYXQoRGF0ZVRpbWVGb3JtYXR0ZXIub2ZQYXR0ZXJuKCJ5eXl5TU1kZCIpKS50b0ludGVnZXIoKTsNCiAgICBpbnQgZW50cnlUaW1lID0gZGF0ZVRpbWUuZm9ybWF0KERhdGVUaW1lRm9ybWF0dGVyLm9mUGF0dGVybigiSEhtbXNzIikpLnRvSW50ZWdlcigpOw0KICAgIGluQ0hJRCA9IHByb2dyYW0uZ2V0VXNlcigpOw0KICAgIGluQ0hOTyA9IDE7DQogICAgaW5SR0RUID0gZW50cnlEYXRlOw0KICAgIGluUkdUTSA9IGVudHJ5VGltZTsNCiAgICBpbkxNRFQgPSBlbnRyeURhdGU7DQogICAgaW5MTVRNID0gZW50cnlUaW1lOw0KDQogICAgRVhUUkFXLnNldCgiRVhUUlFUIiwgaW5UUlFUKTsNCiAgICBFWFRSQVcuc2V0KCJFWFRBTVQiLCBpblRBTVQpOw0KICAgIEVYVFJBVy5zZXQoIkVYUENURyIsIGluUENURyk7DQogICAgRVhUUkFXLnNldCgiRVhGREFUIiwgaW5GREFUKTsNCiAgICBFWFRSQVcuc2V0KCJFWFREQVQiLCBpblREQVQpOw0KICAgIEVYVFJBVy5zZXQoIkVYQ0hJRCIsIGluQ0hJRCk7DQogICAgRVhUUkFXLnNldCgiRVhDSE5PIiwgaW5DSE5PKTsNCiAgICBFWFRSQVcuc2V0KCJFWFJHRFQiLCBpblJHRFQpOw0KICAgIEVYVFJBVy5zZXQoIkVYUkdUTSIsIGluUkdUTSk7DQogICAgRVhUUkFXLnNldCgiRVhMTURUIiwgaW5MTURUKTsNCiAgICBFWFRSQVcuc2V0KCJFWExNVE0iLCBpbkxNVE0pOw0KDQogICAgRVhUUkFXX3F1ZXJ5Lmluc2VydChFWFRSQVcpOw0KICB9DQoNCiAgYm9vbGVhbiBpc1ZhbGlkSW5wdXQoKSB7DQogICAgLy8gQ2hlY2sgRkRBVA0KICAgIGlmIChpbkZEQVQgIT0gMCkgew0KICAgICAgaWYgKCF1dGlsaXR5LmNhbGwoIkRhdGVVdGlsIiwgImlzRGF0ZVZhbGlkIiwgaW5GREFULnRvU3RyaW5nKCksICJ5eXl5TU1kZCIpKSB7DQogICAgICAgIG1pLmVycm9yKCJJbnZhbGlkIERBVEUgaW5wdXQgZm9yIEZEQVQiKTsNCiAgICAgICAgcmV0dXJuIGZhbHNlOw0KICAgICAgfQ0KICAgIH0NCiAgICANCiAgICAvLyBDaGVjayBUREFUDQogICAgaWYgKGluVERBVCAhPSAwKSB7DQogICAgICBpZiAoIXV0aWxpdHkuY2FsbCgiRGF0ZVV0aWwiLCAiaXNEYXRlVmFsaWQiLCBpblREQVQudG9TdHJpbmcoKSwgInl5eXlNTWRkIikpIHsNCiAgICAgICAgbWkuZXJyb3IoIkludmFsaWQgREFURSBpbnB1dCBmb3IgVERBVCIpOw0KICAgICAgICByZXR1cm4gZmFsc2U7DQogICAgICB9DQogICAgfQ0KICAgIA0KICAgIC8vIENoZWNrIEZEQVQgYW5kIFREQVQNCiAgICBpZiAoaW5GREFUICE9IDAgJiYgaW5UREFUICE9IDApIHsNCiAgICAgIFN0cmluZyBzdHJGREFUID0gaW5GREFULnRvU3RyaW5nKCk7DQogICAgICBTdHJpbmcgc3RyVERBVCA9IGluVERBVC50b1N0cmluZygpDQogICAgICBTdHJpbmcgZHRGb3JtYXQgPSAieXl5eU1NZGQiOw0KICAgICAgDQogICAgICBTaW1wbGVEYXRlRm9ybWF0IHNpbXBsZURhdGVGb3JtYXQgPSBuZXcgU2ltcGxlRGF0ZUZvcm1hdChkdEZvcm1hdCk7DQogICAgICBEYXRlIGRmRkRBVCA9IHNpbXBsZURhdGVGb3JtYXQucGFyc2Uoc3RyRkRBVCk7DQogICAgICBEYXRlIGRmVERBVCA9IHNpbXBsZURhdGVGb3JtYXQucGFyc2Uoc3RyVERBVCk7DQogICAgDQogICAgICBpZihkZkZEQVQuYWZ0ZXIoZGZUREFUKSkgew0KICAgICAgICBtaS5lcnJvcigiRnJvbSBkYXRlIGlzIGdyZWF0ZXIgdGhhbiBUbyBkYXRlIik7DQogICAgICAgIHJldHVybiBmYWxzZTsNCiAgICAgIH0NCiAgICAgIA0KICAgICAgaWYoZGZUREFULmJlZm9yZShkZkZEQVQpKSB7DQogICAgICAgIG1pLmVycm9yKCJUbyBkYXRlIGlzIGxlc3MgdGhhbiBGcm9tIGRhdGUiKTsNCiAgICAgICAgcmV0dXJuIGZhbHNlOw0KICAgICAgfQ0KICAgIH0NCiAgICANCiAgICAvLyBDaGVjayBGQUNJDQogICAgaWYgKCFpbkZBQ0kuaXNCbGFuaygpKSB7DQogICAgICBpZiAoIXRoaXMuY2hlY2tGQUNJKCkpIHsNCiAgICAgICAgbWkuZXJyb3IoIkZhY2lsaXR5ICR7aW5GQUNJfSBkb2VzIG5vdCBleGlzdCIpOw0KICAgICAgICByZXR1cm4gZmFsc2U7DQogICAgICB9DQogICAgfQ0KICAgIA0KICAgIC8vIENoZWNrIE1UTk8NCiAgICBpZiAoIWluTVROTy5pc0JsYW5rKCkpIHsNCiAgICAgIGlmICghdGhpcy5jaGVja0lUTk8oaW5NVE5PKSkgew0KICAgICAgICBtaS5lcnJvcigiSXRlbSBudW1iZXIgJHtpbk1UTk99IGRvZXMgbm90IGV4aXN0Iik7DQogICAgICAgIHJldHVybiBmYWxzZTsNCiAgICAgIH0NCiAgICB9DQogICAgDQogICAgLy8gQ2hlY2sgSVROTw0KICAgIGlmICghaW5JVE5PLmlzQmxhbmsoKSkgew0KICAgICAgaWYgKCF0aGlzLmNoZWNrSVROTyhpbklUTk8pKSB7DQogICAgICAgIG1pLmVycm9yKCJJdGVtIG51bWJlciAke2luSVROT30gZG9lcyBub3QgZXhpc3QiKTsNCiAgICAgICAgcmV0dXJuIGZhbHNlOw0KICAgICAgfQ0KICAgIH0NCiAgICANCiAgICAvLyBDaGVjayBJVENMDQogICAgaWYgKCFpbklUQ0wuaXNCbGFuaygpKSB7DQogICAgICBpZiAoIXRoaXMuY2hlY2tJVENMKCkpIHsNCiAgICAgICAgbWkuZXJyb3IoIlByb2R1Y3QgZ3JvdXAgJHtpbklUQ0x9IGRvZXMgbm90IGV4aXN0Iik7DQogICAgICAgIHJldHVybiBmYWxzZTsNCiAgICAgIH0NCiAgICB9DQogICAgDQogICAgcmV0dXJuIHRydWU7DQogIH0NCiAgDQogIC8qKg0KICAgKiBWYWxpZGF0ZSBGQUNJIGZyb20gQ0ZBQ0lMDQogICAqLw0KICBib29sZWFuIGNoZWNrRkFDSSgpIHsNCiAgICBEQkFjdGlvbiBDRkFDSUxfcXVlcnkgPSBkYXRhYmFzZS50YWJsZSgiQ0ZBQ0lMIikuaW5kZXgoIjAwIikuYnVpbGQoKTsNCiAgICBEQkNvbnRhaW5lciBDRkFDSUwgPSBDRkFDSUxfcXVlcnkuZ2V0Q29udGFpbmVyKCk7DQogICAgQ0ZBQ0lMLnNldCgiQ0ZDT05PIiwgaW5DT05PKTsNCiAgICBDRkFDSUwuc2V0KCJDRkZBQ0kiLCBpbkZBQ0kpOw0KICANCiAgICBpZiAoIUNGQUNJTF9xdWVyeS5yZWFkKENGQUNJTCkpIHsNCiAgICAgIHJldHVybiBmYWxzZTsNCiAgICB9IGVsc2Ugew0KICAgICAgcmV0dXJuIHRydWU7DQogICAgfQ0KICB9DQogIA0KICAvKioNCiAgICogVmFsaWRhdGUgSVROTyBmcm9tIE1JVE1BUw0KICAgKi8NCiAgYm9vbGVhbiBjaGVja0lUTk8oU3RyaW5nIElUTk8pIHsNCiAgICBEQkFjdGlvbiBNSVRNQVNfcXVlcnkgPSBkYXRhYmFzZS50YWJsZSgiTUlUTUFTIikuaW5kZXgoIjAwIikuYnVpbGQoKTsNCiAgICBEQkNvbnRhaW5lciBNSVRNQVMgPSBNSVRNQVNfcXVlcnkuZ2V0Q29udGFpbmVyKCk7DQogICAgTUlUTUFTLnNldCgiTU1DT05PIiwgaW5DT05PKTsNCiAgICBNSVRNQVMuc2V0KCJNTUlUTk8iLCBJVE5PKTsNCiAgDQogICAgaWYgKCFNSVRNQVNfcXVlcnkucmVhZChNSVRNQVMpKSB7DQogICAgICByZXR1cm4gZmFsc2U7DQogICAgfSBlbHNlIHsNCiAgICAgIHJldHVybiB0cnVlOw0KICAgIH0NCiAgfQ0KICANCiAgLyoqDQogICAqIFZhbGlkYXRlIElUQ0wgZnJvbSBDU1lUQUINCiAgICovDQogIGJvb2xlYW4gY2hlY2tJVENMKCkgew0KICAgIERCQWN0aW9uIENTWVRBQl9xdWVyeSA9IGRhdGFiYXNlLnRhYmxlKCJDU1lUQUIiKS5pbmRleCgiMDAiKS5idWlsZCgpOw0KICAgIERCQ29udGFpbmVyIENTWVRBQiA9IENTWVRBQl9xdWVyeS5nZXRDb250YWluZXIoKTsNCiAgICBDU1lUQUIuc2V0KCJDVENPTk8iLCBpbkNPTk8pOw0KICAgIENTWVRBQi5zZXQoIkNURElWSSIsICIiKTsNCiAgICBDU1lUQUIuc2V0KCJDVFNUQ08iLCAiSVRDTCIpOw0KICAgIENTWVRBQi5zZXQoIkNUU1RLWSIsIGluSVRDTCk7DQogICAgQ1NZVEFCLnNldCgiQ1RMTkNEIiwgIiIpOw0KICAgIA0KICAgIGlmICghQ1NZVEFCX3F1ZXJ5LnJlYWQoQ1NZVEFCKSkgew0KICAgICAgcmV0dXJuIGZhbHNlOw0KICAgIH0gZWxzZSB7DQogICAgICByZXR1cm4gdHJ1ZTsNCiAgICB9DQogIH0NCg0KfQ=="}}}